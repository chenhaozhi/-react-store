{"version":3,"file":"index.js","mappings":"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","sources":["webpack://think-react-store/webpack/universalModuleDefinition","webpack://think-react-store/webpack/bootstrap","webpack://think-react-store/webpack/runtime/compat get default export","webpack://think-react-store/webpack/runtime/define property getters","webpack://think-react-store/webpack/runtime/hasOwnProperty shorthand","webpack://think-react-store/webpack/runtime/make namespace object","webpack://think-react-store/external commonjs \"@babel/runtime/helpers/extends\"","webpack://think-react-store/external commonjs \"react\"","webpack://think-react-store/external commonjs \"ramda/src/is\"","webpack://think-react-store/external commonjs \"ramda/src/path\"","webpack://think-react-store/./src/util.js","webpack://think-react-store/external commonjs \"ramda/src/isEmpty\"","webpack://think-react-store/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/extends\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"react\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"ramda/src/is\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"ramda/src/path\");","import is from \"ramda/src/is\";\nimport path from \"ramda/src/path\";\n\nexport function get(target, source) {\n  return path(target, source);\n}\n\nexport function run(target, source, ...args) {\n  const res = get(target, source);\n  if (is(Function, res)) {\n    return res(...args);\n  }\n  return undefined;\n}\n\n// 判断是否是异步函数\nexport function isAsyncFunction(cb) {\n  if (!cb) {\n    return false;\n  }\n  return cb.constructor.name === \"AsyncFunction\";\n}\n\n/**\n * 函数是否在effects/reducers/methods里面\n * @param {String} type  methods effects reducers\n * @param {Object} obj\n * @param {String} name\n */\nexport function inWhich(type, obj, name) {\n  if (!obj) {\n    return false;\n  }\n\n  if (!obj[type]) {\n    return false;\n  }\n\n  if (obj[type][name]) {\n    return true;\n  }\n}\n\nexport function transBool(obj, flag = true) {\n  if (!is(Object, obj)) {\n    return {};\n  }\n\n  let newObj = {};\n  Object.keys(obj).forEach((item) => {\n    newObj[item] = flag;\n  });\n  return newObj;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"ramda/src/isEmpty\");","import React, { useContext, useReducer } from \"react\";\nimport { get, run, isAsyncFunction, inWhich, transBool } from \"./util\";\nimport is from \"ramda/src/is\";\nimport isEmpty from \"ramda/src/isEmpty\";\n\nconst StoreContext = React.createContext();\n\nconst LOADING = \"hook-loading-clear\";\n\nlet initialState = {},\n  initStore = {}, //传入的store\n  asyncKey, //异步的key\n  newData, //新的数据\n  methodsName = {}, //所有方法名\n  actionAsync; //触发的异步方法\n\nfunction doRun(key, actionArr, type, store, state, payload) {\n  let res;\n  actionArr.forEach((item) => {\n    if (get([key, item, type], store)) {\n      res = run([key, item, type], store, state, payload);\n    }\n  });\n  newData = res;\n  return res;\n}\n\nfunction reducer(state, action) {\n  const { key, type, payload } = action;\n  const _key = key || asyncKey;\n\n  return {\n    ...state,\n    [_key]: {\n      ...state[_key],\n      ...doRun(\n        _key,\n        [\"methods\", \"reducers\", \"effects\"],\n        type,\n        initStore,\n        state[_key],\n        payload\n      ),\n    },\n  };\n}\n\nfunction StoreProvider(props) {\n  const { store, middleware } = props;\n  if (!store) {\n    console.error(`\n      store 必须有值，类似于：\n      <StoreProvider store={store}>\n      `);\n    return null;\n  }\n\n  const hasLoadingMiddleware = middleware?.filter(\n    (item) => item.name === \"loading\"\n  )?.length;\n  // const propsCacheExit = props?.cache?.length;\n\n  if (hasLoadingMiddleware) {\n    function setLoadingTrue() {\n      if (isEmpty(methodsName)) {\n        Object.keys(store).forEach((item) => {\n          methodsName[item] = {\n            ...transBool(get([item, \"methods\"], store), false),\n            ...transBool(get([item, \"reducers\"], store), false),\n            ...transBool(get([item, \"effects\"], store), false),\n          };\n        });\n      }\n    }\n    setLoadingTrue();\n  }\n\n  initStore = store;\n\n  // 中间件\n  function middlewareReducer(prevState, action) {\n    if (!action) {\n      return store;\n    }\n\n    if (middleware) {\n      if (!is(Array, middleware)) {\n        throw new Error(\"middleware中间件必须为数组\");\n      }\n    }\n\n    let nextState = reducer(prevState, action);\n\n    middleware &&\n      middleware.forEach((item) => {\n        const newState = item(\n          store,\n          prevState,\n          nextState,\n          action,\n          actionAsync,\n          asyncKey,\n          props?.cache\n        );\n        if (newState) {\n          nextState = newState;\n        }\n      });\n\n    return nextState;\n  }\n\n  Object.keys(initStore).forEach((item) => {\n    initialState[item] = initStore[item][\"state\"];\n  });\n\n  if (hasLoadingMiddleware && !initialState[\"loading\"]) {\n    initialState[\"loading\"] = methodsName;\n  }\n\n  let [state, origin_dispatch] = useReducer(middlewareReducer, initialState);\n\n  const dispatch = async (action, payload, key) => {\n    actionAsync = undefined;\n\n    if (get([asyncKey, \"reducers\", action.type], initStore)) {\n      return origin_dispatch(action);\n    }\n\n    if (\n      !isAsyncFunction(action) &&\n      inWhich(\"effects\", initStore[action.key || asyncKey], action.type)\n    ) {\n      asyncKey = action.key;\n      actionAsync = action.type;\n\n      if (hasLoadingMiddleware) {\n        origin_dispatch({\n          key: asyncKey,\n          type: LOADING,\n          payload: actionAsync,\n        });\n      }\n\n      const func = get([action.key, \"effects\", action.type], initStore);\n      return await func(origin_dispatch, state, action.payload);\n    }\n\n    if (\n      isAsyncFunction(action) ||\n      get([asyncKey, \"effects\", action], initStore)\n    ) {\n      asyncKey = key;\n      actionAsync = action.name;\n\n      if (hasLoadingMiddleware) {\n        origin_dispatch({\n          key: asyncKey,\n          type: LOADING,\n          payload: action.name,\n        });\n      }\n\n      return await action(origin_dispatch, state, payload);\n    }\n\n    if (!isAsyncFunction(action) && is(Function, action)) {\n      if (is(Object, action())) {\n        const _action =\n          get([action().key, \"methods\", action().type], initStore) ||\n          get([action().key, \"effects\", action().type], initStore);\n\n        if (is(Function, _action)) {\n          asyncKey = action().key;\n          actionAsync = action().type;\n\n          if (hasLoadingMiddleware) {\n            origin_dispatch({\n              key: asyncKey,\n              type: LOADING,\n              payload: actionAsync,\n            });\n          }\n\n          return await _action(origin_dispatch, state, action().payload);\n        }\n      }\n    }\n\n    return origin_dispatch(action);\n  };\n\n  return (\n    <StoreContext.Provider value={{ state, dispatch }}>\n      {props.children}\n    </StoreContext.Provider>\n  );\n}\n\nfunction useDispatchHook(key) {\n  const store = useContext(StoreContext);\n  if (key) {\n    asyncKey = key;\n  }\n  return store.dispatch;\n}\n\nfunction useStateHook(key) {\n  const store = useContext(StoreContext);\n\n  return key ? get([\"state\", key], store) : get([\"state\"], store);\n}\n\n/*返回state和方法\n{\n  user: {id:1,getUser(state,payload){xxxx}}\n}\n*/\nfunction useStoreHook() {\n  const { state, dispatch } = useContext(StoreContext);\n  let _store = {};\n  Object.keys(state).forEach((key) => {\n    let _methods = {};\n    const methods = {\n      ...get([key, \"methods\"], initStore),\n      ...get([key, \"reducers\"], initStore),\n      ...get([key, \"effects\"], initStore),\n    };\n    const methodsArr = methods && Object.keys(methods);\n\n    is(Array, methodsArr) &&\n      methodsArr.forEach((item) => {\n        if (\n          isAsyncFunction(methods[item]) ||\n          inWhich(\"effects\", initStore[key], item)\n        ) {\n          _methods[item] = async (payload) => {\n            await dispatch(methods[item], payload, key);\n          };\n        }\n\n        if (!isAsyncFunction(methods[item]) && is(Function, methods[item])) {\n          _methods[item] = (payload) => {\n            dispatch({\n              key: key,\n              type: item,\n              payload,\n            });\n          };\n        }\n      });\n\n    _store[key] = {\n      ...state[key],\n      ..._methods,\n    };\n  });\n\n  return _store;\n}\n\n/**\n * 添加属性和方法到组件中\n * @param {*} mapStateToProps state状态值\n * @param {*} mapDispatchToProps dispatch方法\n * @returns\n */\nfunction connect(mapStateToProps, mapDispatchToProps) {\n  return function (Comp) {\n    return function (props) {\n      const store = useStoreHook();\n      const { state } = useContext(StoreContext);\n      const rootState = state;\n      let methods = {};\n      Object.keys(store).forEach((item) => {\n        // const _state = rootState[item]\n        methods[item] = {};\n        Object.keys(store[item]).forEach((i) => {\n          if (is(Function, store[item][i])) {\n            if (\n              isAsyncFunction(store[item][i]) ||\n              inWhich(\"effects\", initStore[item], i)\n            ) {\n              methods[item][i] = function (dispatch, state, payload) {\n                return new Promise(async (resolve, reject) => {\n                  try {\n                    await store[item][i](dispatch, rootState, payload);\n                    resolve(newData);\n                  } catch (err) {\n                    reject(err);\n                  }\n                });\n              };\n            } else {\n              methods[item][i] = function (state, payload) {\n                return new Promise((resolve, reject) => {\n                  try {\n                    store[item][i](state, payload);\n                    resolve(state);\n                  } catch (err) {\n                    reject(err);\n                  }\n                });\n              };\n            }\n          }\n        });\n      });\n\n      const stateToProps = mapStateToProps(state);\n      const dispatchToProps = mapDispatchToProps(methods);\n\n      return (\n        <Comp\n          {...stateToProps}\n          {...dispatchToProps}\n          {...props}\n        />\n      );\n    };\n  };\n}\n\nexport {\n  StoreContext,\n  StoreProvider,\n  useStateHook,\n  useDispatchHook,\n  useStoreHook,\n  connect,\n};\n"],"names":["is","path","get","target","source","run","args","res","Function","undefined","isAsyncFunction","cb","constructor","name","inWhich","type","obj","transBool","flag","Object","newObj","keys","forEach","item","React","useContext","useReducer","isEmpty","StoreContext","createContext","LOADING","initialState","initStore","asyncKey","newData","methodsName","actionAsync","doRun","key","actionArr","store","state","payload","reducer","action","_key","StoreProvider","props","_middleware$filter","middleware","console","error","hasLoadingMiddleware","filter","length","setLoadingTrue","middlewareReducer","prevState","Array","Error","nextState","newState","cache","origin_dispatch","dispatch","func","_action","createElement","Provider","value","children","useDispatchHook","useStateHook","useStoreHook","_store","_methods","methods","methodsArr","connect","mapStateToProps","mapDispatchToProps","Comp","rootState","i","Promise","resolve","reject","err","stateToProps","dispatchToProps","_extends"],"sourceRoot":""}