/*! For license information please see index.min.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(self,(()=>(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{StoreContext:()=>m,StoreProvider:()=>g,connect:()=>F,useDispatchHook:()=>S,useStateHook:()=>P,useStoreHook:()=>C});const r=require("@babel/runtime/helpers/extends");var n=e.n(r);const o=require("react");var c=e.n(o);const a=require("ramda/src/is");var s=e.n(a);const u=require("ramda/src/path");var i=e.n(u);function f(e,t){return i()(e,t)}function y(e){return!!e&&"AsyncFunction"===e.constructor.name}function d(e,t,r){return!!t&&!!t[e]&&(!!t[e][r]||void 0)}function l(e,t=!0){if(!s()(Object,e))return{};let r={};return Object.keys(e).forEach((e=>{r[e]=t})),r}const p=require("ramda/src/isEmpty");var h=e.n(p);const m=c().createContext(),b="hook-loading-clear";let k,v,j,O={},E={},w={};function x(e,t,r,n,o,c){let a;return t.forEach((t=>{f([e,t,r],n)&&(a=function(e,t,...r){const n=f(e,t);if(s()(Function,n))return n(...r)}([e,t,r],n,o,c))})),v=a,a}function g(e){var t;const{store:r,middleware:n}=e;if(!r)return console.error("\n      store 必须有值，类似于：\n      <StoreProvider store={store}>\n      "),null;const a=null==n||null===(t=n.filter((e=>"loading"===e.name)))||void 0===t?void 0:t.length;a&&h()(w)&&Object.keys(r).forEach((e=>{w[e]={...l(f([e,"methods"],r),!1),...l(f([e,"reducers"],r),!1),...l(f([e,"effects"],r),!1)}})),E=r,Object.keys(E).forEach((e=>{O[e]=E[e].state})),a&&!O.loading&&(O.loading=w);let[u,i]=(0,o.useReducer)((function(t,o){if(!o)return r;if(n&&!s()(Array,n))throw new Error("middleware中间件必须为数组");let c=function(e,t){const{key:r,type:n,payload:o}=t,c=r||k;return{...e,[c]:{...e[c],...x(c,["methods","reducers","effects"],n,E,e[c],o)}}}(t,o);return n&&n.forEach((n=>{const a=n(r,t,c,o,j,k,null==e?void 0:e.cache);a&&(c=a)})),c}),O);return c().createElement(m.Provider,{value:{state:u,dispatch:async(e,t,r)=>{if(j=void 0,f([k,"reducers",e.type],E))return i(e);if(!y(e)&&d("effects",E[e.key||k],e.type)){k=e.key,j=e.type,a&&i({key:k,type:b,payload:j});const t=f([e.key,"effects",e.type],E);return await t(i,u,e.payload)}if(y(e)||f([k,"effects",e],E))return k=r,j=e.name,a&&i({key:k,type:b,payload:e.name}),await e(i,u,t);if(!y(e)&&s()(Function,e)&&s()(Object,e())){const t=f([e().key,"methods",e().type],E)||f([e().key,"effects",e().type],E);if(s()(Function,t))return k=e().key,j=e().type,a&&i({key:k,type:b,payload:j}),await t(i,u,e().payload)}return i(e)}}},e.children)}function S(e){const t=(0,o.useContext)(m);return e&&(k=e),t.dispatch}function P(e){return f(e?["state",e]:["state"],(0,o.useContext)(m))}function C(){const{state:e,dispatch:t}=(0,o.useContext)(m);let r={};return Object.keys(e).forEach((n=>{let o={};const c={...f([n,"methods"],E),...f([n,"reducers"],E),...f([n,"effects"],E)},a=c&&Object.keys(c);s()(Array,a)&&a.forEach((e=>{(y(c[e])||d("effects",E[n],e))&&(o[e]=async r=>{await t(c[e],r,n)}),!y(c[e])&&s()(Function,c[e])&&(o[e]=r=>{t({key:n,type:e,payload:r})})})),r[n]={...e[n],...o}})),r}function F(e,t){return function(r){return function(a){const u=C(),{state:i}=(0,o.useContext)(m),f=i;let l={};Object.keys(u).forEach((e=>{l[e]={},Object.keys(u[e]).forEach((t=>{s()(Function,u[e][t])&&(y(u[e][t])||d("effects",E[e],t)?l[e][t]=function(r,n,o){return new Promise((async(n,c)=>{try{await u[e][t](r,f,o),n(v)}catch(e){c(e)}}))}:l[e][t]=function(r,n){return new Promise(((o,c)=>{try{u[e][t](r,n),o(r)}catch(e){c(e)}}))})}))}));const p=e(i),h=t(l);return c().createElement(r,n()({},p,h,a))}}}return t})()));
//# sourceMappingURL=index.min.js.map